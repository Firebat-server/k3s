# 1. 기본 이미지 및 인그레스 설정
image:
  repository: gethomepage/homepage
  tag: "v1.8.0"
  pullPolicy: Always

ingress:
  enabled: true
  ingressClassName: traefik
  hosts:
    - host: home.jay-gemini.com
      paths:
        - path: /
          pathType: Prefix

env:
  - name: HOMEPAGE_VAR_GRAFANA_USER
    valueFrom:
      secretKeyRef:
        name: homepage-secret
        key: grafana_user
  - name: HOMEPAGE_VAR_GRAFANA_PASSWORD
    valueFrom:
      secretKeyRef:
        name: homepage-secret
        key: grafana_password
  - name: HOMEPAGE_VAR_CALENDAR_URL
    valueFrom:
      secretKeyRef:
        name: calendar-secret
        key: url

# 2. 대시보드 구성
config:
  # [상단 위젯] 날씨, 시스템 리소스, 검색창
  widgets:
    - weather:
        label: Seoul
        latitude: 37.5665
        longitude: 126.9780
        units: metric
        provider: openmeteo
    - resources:
        cpu: true
        memory: true
        disk: /
    - search:
        provider: google
        target: _blank
        focus: true

  # [서비스 목록]
  services:
    # ---------------------------------------------------
    # [Group 1] 캘린더 듀얼 뷰
    # ---------------------------------------------------
    - Schedule:
        - Monthly View:
            icon: calendar
            widget:
              type: calendar
              view: monthly
              firstDayInWeek: monday
              maxEvents: 10
              showTime: true
              # 한국 공휴일 데이터 (본인 구글 캘린더 iCal 주소로 교체 가능)
              url: "{{HOMEPAGE_VAR_CALENDAR_URL}}"

        - Agenda View:
            icon: list
            widget:
              type: calendar
              view: agenda
              firstDayInWeek: monday
              maxEvents: 11
              showTime: true
              url: "{{HOMEPAGE_VAR_CALENDAR_URL}}"
    # ---------------------------------------------------
    # [Group 2] Infrastructure
    # ---------------------------------------------------
    - Infrastructure:
        - Nginx Proxy:
            icon: nginx
            href: "http://172.30.1.79"
            description: "Reverse Proxy"
            ping: "http://172.30.1.79"

        - Jenkins:
            icon: jenkins.png
            href: "https://jenkins.jay-gemini.com"
            description: "CI/CD"
            ping: "http://172.30.1.79:8090"

        - Grafana:
            icon: grafana.png
            href: "https://grafana.jay-gemini.com"
            description: "Monitoring"
            ping: "http://172.30.1.79:3000"
            widget:
              type: grafana
              url: "http://172.30.1.79:3000"
              username: "{{HOMEPAGE_VAR_GRAFANA_USER}}"
              password: "{{HOMEPAGE_VAR_GRAFANA_PASSWORD}}"

    # ---------------------------------------------------
    # [Group 3] AI & Backend
    # ---------------------------------------------------
    - AI_Stack:
        - ZenML:
            icon: https://raw.githubusercontent.com/zenml-io/zenml/main/assets/logo.png
            href: "https://zenml.jay-gemini.com"
            description: "MLOps"
            ping: "http://172.30.1.79:8082"
        - MLflow:
            icon: https://github.com/mlflow/mlflow/raw/master/docs/source/_static/mlflow-logo.png
            href: "https://mlflow.jay-gemini.com"
            description: "Tracking"
            ping: "http://172.30.1.79:5001"

    # ---------------------------------------------------
    # [Group 4] Web & Blogs
    # ---------------------------------------------------
    - Web_Services:
        - Jay's Blog:
            icon: https://jay-gemini.com/icon/?2cb1f0e400da67bb=
            href: "https://jay-gemini.com"
            ping: "http://172.30.1.79:8081"
        - n8n:
            icon: n8n.png
            href: "https://n8n.jay-gemini.com"
            description: "Workflow Automation"
            ping: "http://172.30.1.79:5678"

  settings:
    title: "Jay's Workspace"
    background:
      image: "https://images.hdqwalls.com/download/macos-12-monterey-5k-rz-3840x2160.jpg"
      opacity: 0.5
    layout:
      Schedule:
        style: row
        columns: 2
      Infrastructure:
        style: row
        columns: 4
      AI_Stack:
        style: row
        columns: 4
      Web_Services:
        style: row
        columns: 4

volumes:
  - name: config
    configMap:
      name: homepage-config
      items:
        - key: services.yaml
          path: services.yaml
        - key: widgets.yaml
          path: widgets.yaml
        - key: settings.yaml
          path: settings.yaml
        - key: bookmarks.yaml
          path: bookmarks.yaml
        - key: kubernetes.yaml
          path: kubernetes.yaml
        - key: docker.yaml
          path: docker.yaml
        - key: custom.css
          path: custom.css
        - key: proxmox.yaml
          path: proxmox.yaml
        - key: custom.js
          path: custom.js
